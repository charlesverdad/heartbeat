{
  "version": 4,
  "terraform_version": "1.12.1",
  "serial": 19,
  "lineage": "3611e5f7-0696-c883-ec2a-ca559b017e5a",
  "outputs": {
    "cloudflare_tunnel_cname": {
      "value": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f.cfargotunnel.com",
      "type": "string"
    },
    "cloudflare_tunnel_id": {
      "value": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f",
      "type": "string"
    },
    "key_vault_name": {
      "value": "kv-vm1-prod-8ts0",
      "type": "string"
    },
    "managed_identity_client_id": {
      "value": "c0df73ad-3b9e-4ae1-b59a-520411e6560c",
      "type": "string"
    },
    "managed_identity_principal_id": {
      "value": "2cbf3979-e92a-4765-9aaa-737e02707b76",
      "type": "string"
    },
    "resource_group_name": {
      "value": "rg-vm1-prod-8ts0",
      "type": "string"
    },
    "ssh_access_command": {
      "value": "cloudflared access ssh --hostname vm1.heartbeatchurch.com.au",
      "type": "string"
    },
    "subnet_name": {
      "value": "snet-vm1-prod",
      "type": "string"
    },
    "vm_name": {
      "value": "vm1-prod-8ts0",
      "type": "string"
    },
    "vm_private_ip": {
      "value": "10.42.1.4",
      "type": "string"
    },
    "vnet_name": {
      "value": "vnet-vm1-prod",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "azurerm_client_config",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "client_id": "04b07795-8ddb-461a-bbee-02f9e1bf7b46",
            "id": "Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9NjhhM2JjMWMtMGQzZi00MDU3LThkYzMtMTM2MDA3ZjAxN2JkO3N1YnNjcmlwdGlvbklkPTM1NmIwOTk2LTI3NmMtNDEwNC1iOTA2LWVmYTIwMTRmOWQ2NDt0ZW5hbnRJZD00MmZmODA2YS0xYmEyLTQ4ZjEtYTRhZi1lYWRlYzA2ZDI0ODY=",
            "object_id": "68a3bc1c-0d3f-4057-8dc3-136007f017bd",
            "subscription_id": "356b0996-276c-4104-b906-efa2014f9d64",
            "tenant_id": "42ff806a-1ba2-48f1-a4af-eadec06d2486",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "access_policy": [
              {
                "application_id": "",
                "certificate_permissions": null,
                "key_permissions": null,
                "object_id": "68a3bc1c-0d3f-4057-8dc3-136007f017bd",
                "secret_permissions": [
                  "Get",
                  "List",
                  "Set",
                  "Delete",
                  "Recover",
                  "Backup",
                  "Restore"
                ],
                "storage_permissions": null,
                "tenant_id": "42ff806a-1ba2-48f1-a4af-eadec06d2486"
              },
              {
                "application_id": "",
                "certificate_permissions": null,
                "key_permissions": null,
                "object_id": "2cbf3979-e92a-4765-9aaa-737e02707b76",
                "secret_permissions": [
                  "Get",
                  "List"
                ],
                "storage_permissions": null,
                "tenant_id": "42ff806a-1ba2-48f1-a4af-eadec06d2486"
              }
            ],
            "contact": [],
            "enable_rbac_authorization": false,
            "enabled_for_deployment": false,
            "enabled_for_disk_encryption": true,
            "enabled_for_template_deployment": false,
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0",
            "location": "australiaeast",
            "name": "kv-vm1-prod-8ts0",
            "network_acls": [
              {
                "bypass": "AzureServices",
                "default_action": "Allow",
                "ip_rules": [],
                "virtual_network_subnet_ids": []
              }
            ],
            "public_network_access_enabled": true,
            "purge_protection_enabled": false,
            "resource_group_name": "rg-vm1-prod-8ts0",
            "sku_name": "standard",
            "soft_delete_retention_days": 7,
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "tenant_id": "42ff806a-1ba2-48f1-a4af-eadec06d2486",
            "timeouts": null,
            "vault_uri": "https://kv-vm1-prod-8ts0.vault.azure.net/"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIyIn0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "azurerm_user_assigned_identity.vm",
            "data.azurerm_client_config.current",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "cloudflare_ca_public_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kv-vm1-prod-8ts0.vault.azure.net/secrets/cloudflare-ca-public-key/169b49a218574656a5620a1af641ff3d",
            "key_vault_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0",
            "name": "cloudflare-ca-public-key",
            "not_before_date": null,
            "resource_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0/secrets/cloudflare-ca-public-key/versions/169b49a218574656a5620a1af641ff3d",
            "resource_versionless_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0/secrets/cloudflare-ca-public-key",
            "tags": null,
            "timeouts": null,
            "value": "PLACEHOLDER_CA_PUBLIC_KEY_CHANGE_AFTER_DEPLOYMENT",
            "version": "169b49a218574656a5620a1af641ff3d",
            "versionless_id": "https://kv-vm1-prod-8ts0.vault.azure.net/secrets/cloudflare-ca-public-key"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.vm",
            "azurerm_resource_group.vm",
            "azurerm_user_assigned_identity.vm",
            "data.azurerm_client_config.current",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "cloudflare_tunnel_token",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kv-vm1-prod-8ts0.vault.azure.net/secrets/cloudflare-tunnel-token/0d14154dfc134dbcb28371e6e093dc11",
            "key_vault_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0",
            "name": "cloudflare-tunnel-token",
            "not_before_date": null,
            "resource_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0/secrets/cloudflare-tunnel-token/versions/0d14154dfc134dbcb28371e6e093dc11",
            "resource_versionless_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0/secrets/cloudflare-tunnel-token",
            "tags": null,
            "timeouts": null,
            "value": "eyJhIjoiZDI2YTg3NzExNjI0NDJhNTYzMzcxZWE4MDk3YWNjODkiLCJ0IjoiMjM5MGIzYzMtYjkzZi00ZjNmLTliZDEtZWRlNDMzMmE5YzlmIiwicyI6ImEydFpNRVJuYVZKRVNXTlBiMHN3TVRFMWFYWk1kbFZCTkdkbmVteElTV1pzYkVOcGJYTXdaMVprVDJWV09FTk5UVUkxVG5KVlUxQkhhWEJWTlVvNFpnPT0ifQ==",
            "version": "0d14154dfc134dbcb28371e6e093dc11",
            "versionless_id": "https://kv-vm1-prod-8ts0.vault.azure.net/secrets/cloudflare-tunnel-token"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.vm",
            "azurerm_resource_group.vm",
            "azurerm_user_assigned_identity.vm",
            "cloudflare_zero_trust_tunnel_cloudflared.vm_ssh",
            "data.azurerm_client_config.current",
            "random_string.suffix",
            "random_string.tunnel_secret"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "git_repo_url",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kv-vm1-prod-8ts0.vault.azure.net/secrets/git-repo-url/fcaa8825a8af4516a24161bc8f8aefda",
            "key_vault_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0",
            "name": "git-repo-url",
            "not_before_date": null,
            "resource_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0/secrets/git-repo-url/versions/fcaa8825a8af4516a24161bc8f8aefda",
            "resource_versionless_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.KeyVault/vaults/kv-vm1-prod-8ts0/secrets/git-repo-url",
            "tags": null,
            "timeouts": null,
            "value": "https://github.com/charlesverdad/heartbeat",
            "version": "fcaa8825a8af4516a24161bc8f8aefda",
            "versionless_id": "https://kv-vm1-prod-8ts0.vault.azure.net/secrets/git-repo-url"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.vm",
            "azurerm_resource_group.vm",
            "azurerm_user_assigned_identity.vm",
            "data.azurerm_client_config.current",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_linux_virtual_machine",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_capabilities": [],
            "admin_password": null,
            "admin_ssh_key": [
              {
                "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC+kC89VCdzAw1+h7yof+Bx3NY93AhUv/mmC/o6jDrhm3jDhNo/VItYaJzeHXJe1pwYBtLNrqoVJQw+ZJriI+q3yNmnQvKnfqpTZrOQpgFXpFxCYQSQzDoGPxuq5DR8oy6JUe2IkZtc24GlEcae3xzxFH/TQLPdkWsAC1tT8k8bySKYQ7k/IOsQY94B/M+eXWg7bJ4NJGRnjddEKy3U6nulze1+NT241OtkdukNV+eVGNYbNUWi8nBcNe8zTdu56QOckNykOlF1isuTSzGewKei+nGh32nsXjjca2l+8H/7XHsiiYCGFaLNYUkz0+Bu9MnQsnGxZuN/NaacllfLkN67 terraform@vm",
                "username": "vmadmin"
              }
            ],
            "admin_username": "vmadmin",
            "allow_extension_operations": true,
            "availability_set_id": "",
            "boot_diagnostics": [],
            "bypass_platform_safety_checks_on_user_schedule_enabled": false,
            "capacity_reservation_group_id": "",
            "computer_name": "vm1-prod-8ts0",
            "custom_data": "I2Nsb3VkLWNvbmZpZwoKIyBVcGRhdGUgcGFja2FnZXMKcGFja2FnZV91cGRhdGU6IHRydWUKcGFja2FnZV91cGdyYWRlOiB0cnVlCgojIEluc3RhbGwgcmVxdWlyZWQgcGFja2FnZXMKcGFja2FnZXM6CiAgLSBjdXJsCiAgLSB3Z2V0CiAgLSB1bnppcAogIC0gZ251cGcKICAtIGxzYi1yZWxlYXNlCiAgLSBjYS1jZXJ0aWZpY2F0ZXMKICAtIHNvZnR3YXJlLXByb3BlcnRpZXMtY29tbW9uCiAgLSB1ZncKICAtIHVuYXR0ZW5kZWQtdXBncmFkZXMKCiMgQ3JlYXRlIGRpcmVjdG9yaWVzCnJ1bmNtZDoKICAjIENyZWF0ZSByZXF1aXJlZCBkaXJlY3RvcmllcwogIC0gbWtkaXIgLXAgL3NlY3JldHMKICAtIG1rZGlyIC1wIC9kYXRhCiAgLSBjaG93biB2bWFkbWluOnZtYWRtaW4gL2RhdGEKICAtIGNobW9kIDc1NSAvZGF0YQoKICAjIEZvcm1hdCBhbmQgbW91bnQgZGF0YSBkaXNrCiAgLSB8CiAgICBpZiBbICEgLWYgL2RhdGEvbW91bnRlZCBdOyB0aGVuCiAgICAgIG1rZnMuZXh0NCAvZGV2L2Rpc2svYXp1cmUvc2NzaTEvbHVuMAogICAgICBlY2hvICcvZGV2L2Rpc2svYXp1cmUvc2NzaTEvbHVuMCAvZGF0YSBleHQ0IGRlZmF1bHRzIDAgMicgPj4gL2V0Yy9mc3RhYgogICAgICBtb3VudCAtYQogICAgICB0b3VjaCAvZGF0YS9tb3VudGVkCiAgICBmaQoKICAjIEluc3RhbGwgQXp1cmUgQ0xJCiAgLSBjdXJsIC1zTCBodHRwczovL2FrYS5tcy9JbnN0YWxsQXp1cmVDTElEZWIgfCBiYXNoCgogICMgSW5zdGFsbCBEb2NrZXIKICAtIGN1cmwgLWZzU0wgaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L3VidW50dS9ncGcgfCBncGcgLS1kZWFybW9yIC1vIC91c3Ivc2hhcmUva2V5cmluZ3MvZG9ja2VyLWFyY2hpdmUta2V5cmluZy5ncGcKICAtIGVjaG8gImRlYiBbYXJjaD0kKGRwa2cgLS1wcmludC1hcmNoaXRlY3R1cmUpIHNpZ25lZC1ieT0vdXNyL3NoYXJlL2tleXJpbmdzL2RvY2tlci1hcmNoaXZlLWtleXJpbmcuZ3BnXSBodHRwczovL2Rvd25sb2FkLmRvY2tlci5jb20vbGludXgvdWJ1bnR1ICQobHNiX3JlbGVhc2UgLWNzKSBzdGFibGUiIHwgdGVlIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2RvY2tlci5saXN0ID4gL2Rldi9udWxsCiAgLSBhcHQtZ2V0IHVwZGF0ZQogIC0gYXB0LWdldCBpbnN0YWxsIC15IGRvY2tlci1jZSBkb2NrZXItY2UtY2xpIGNvbnRhaW5lcmQuaW8gZG9ja2VyLWJ1aWxkeC1wbHVnaW4gZG9ja2VyLWNvbXBvc2UtcGx1Z2luCiAgLSB1c2VybW9kIC1hRyBkb2NrZXIgdm1hZG1pbgoKICAjIExvZ2luIHRvIEF6dXJlIHdpdGggbWFuYWdlZCBpZGVudGl0eSBhbmQgcmV0cmlldmUgc2VjcmV0cwogIC0gfAogICAgYXogbG9naW4gLS1pZGVudGl0eQogICAgbWtkaXIgLXAgL3NlY3JldHMKICAgIGNobW9kIDcwMCAvc2VjcmV0cwogICAgCiAgICAjIFdhaXQgZm9yIEtleSBWYXVsdCB0byBiZSByZWFkeQogICAgdW50aWwgYXoga2V5dmF1bHQgc2VjcmV0IHNob3cgLS12YXVsdC1uYW1lICJrdi12bTEtcHJvZC04dHMwIiAtLW5hbWUgImdpdC1yZXBvLXVybCIgLS1xdWVyeSAidmFsdWUiIC1vIHRzdjsgZG8KICAgICAgZWNobyAiV2FpdGluZyBmb3IgS2V5IFZhdWx0IHRvIGJlIHJlYWR5Li4uIgogICAgICBzbGVlcCAzMAogICAgZG9uZQogICAgCiAgICAjIFJldHJpZXZlIHNlY3JldHMgZnJvbSBLZXkgVmF1bHQKICAgIGF6IGtleXZhdWx0IHNlY3JldCBzaG93IC0tdmF1bHQtbmFtZSAia3Ytdm0xLXByb2QtOHRzMCIgLS1uYW1lICJjbG91ZGZsYXJlLXR1bm5lbC10b2tlbiIgLS1xdWVyeSAidmFsdWUiIC1vIHRzdiA+IC9zZWNyZXRzL2Nsb3VkZmxhcmUtdHVubmVsLXRva2VuIHx8IGVjaG8gIkZhaWxlZCB0byByZXRyaWV2ZSB0dW5uZWwgdG9rZW4iCiAgICBheiBrZXl2YXVsdCBzZWNyZXQgc2hvdyAtLXZhdWx0LW5hbWUgImt2LXZtMS1wcm9kLTh0czAiIC0tbmFtZSAiY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5IiAtLXF1ZXJ5ICJ2YWx1ZSIgLW8gdHN2ID4gL3NlY3JldHMvY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5IHx8IGVjaG8gIkZhaWxlZCB0byByZXRyaWV2ZSBDQSBwdWJsaWMga2V5IgogICAgYXoga2V5dmF1bHQgc2VjcmV0IHNob3cgLS12YXVsdC1uYW1lICJrdi12bTEtcHJvZC04dHMwIiAtLW5hbWUgImdpdC1yZXBvLXVybCIgLS1xdWVyeSAidmFsdWUiIC1vIHRzdiA+IC9zZWNyZXRzL2dpdC1yZXBvLXVybAogICAgCiAgICAjIFNldCBwcm9wZXIgcGVybWlzc2lvbnMKICAgIGNobW9kIDQwMCAvc2VjcmV0cy8qCiAgICBjaG93biB2bWFkbWluOnZtYWRtaW4gL3NlY3JldHMvKgoKICAjIEluc3RhbGwgQ2xvdWRmbGFyZWQKICAtIHwKICAgIHdnZXQgLXEgaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkZmxhcmUvY2xvdWRmbGFyZWQvcmVsZWFzZXMvbGF0ZXN0L2Rvd25sb2FkL2Nsb3VkZmxhcmVkLWxpbnV4LWFtZDY0LmRlYgogICAgZHBrZyAtaSBjbG91ZGZsYXJlZC1saW51eC1hbWQ2NC5kZWIKICAgIHJtIGNsb3VkZmxhcmVkLWxpbnV4LWFtZDY0LmRlYgoKICAjIENvbmZpZ3VyZSBDbG91ZGZsYXJlZCB0dW5uZWwKICAtIHwKICAgIGlmIFsgLXMgL3NlY3JldHMvY2xvdWRmbGFyZS10dW5uZWwtdG9rZW4gXTsgdGhlbgogICAgICBzdWRvIC11IHZtYWRtaW4gY2xvdWRmbGFyZWQgc2VydmljZSBpbnN0YWxsICQoY2F0IC9zZWNyZXRzL2Nsb3VkZmxhcmUtdHVubmVsLXRva2VuKQogICAgICBzeXN0ZW1jdGwgZW5hYmxlIGNsb3VkZmxhcmVkCiAgICAgIHN5c3RlbWN0bCBzdGFydCBjbG91ZGZsYXJlZAogICAgICBlY2hvICJDbG91ZGZsYXJlIHR1bm5lbCBjb25maWd1cmVkIGFuZCBzdGFydGVkIHN1Y2Nlc3NmdWxseSIKICAgIGVsc2UKICAgICAgZWNobyAiQ2xvdWRmbGFyZSB0dW5uZWwgdG9rZW4gbm90IGF2YWlsYWJsZS4gU2tpcHBpbmcgdHVubmVsIHNldHVwLiIKICAgIGZpCgogICMgQ29uZmlndXJlIFNTSCB3aXRoIENsb3VkZmxhcmUgQ0EgKGlmIENBIGtleSBpcyBhdmFpbGFibGUpCiAgLSB8CiAgICBpZiBbIC1zIC9zZWNyZXRzL2Nsb3VkZmxhcmUtY2EtcHVibGljLWtleSBdICYmIFsgIiQoY2F0IC9zZWNyZXRzL2Nsb3VkZmxhcmUtY2EtcHVibGljLWtleSkiICE9ICJQTEFDRUhPTERFUl9DQV9QVUJMSUNfS0VZX0NIQU5HRV9BRlRFUl9ERVBMT1lNRU5UIiBdOyB0aGVuCiAgICAgIGNwIC9zZWNyZXRzL2Nsb3VkZmxhcmUtY2EtcHVibGljLWtleSAvZXRjL3NzaC9jbG91ZGZsYXJlX2NhLnB1YgogICAgICBjaG1vZCA2NDQgL2V0Yy9zc2gvY2xvdWRmbGFyZV9jYS5wdWIKICAgICAgCiAgICAgICMgQ29uZmlndXJlIHNzaGQKICAgICAgc2VkIC1pICdzLyNQdWJrZXlBdXRoZW50aWNhdGlvbiB5ZXMvUHVia2V5QXV0aGVudGljYXRpb24geWVzLycgL2V0Yy9zc2gvc3NoZF9jb25maWcKICAgICAgc2VkIC1pICdzLyNQYXNzd29yZEF1dGhlbnRpY2F0aW9uIHllcy9QYXNzd29yZEF1dGhlbnRpY2F0aW9uIG5vLycgL2V0Yy9zc2gvc3NoZF9jb25maWcKICAgICAgc2VkIC1pICdzL1Bhc3N3b3JkQXV0aGVudGljYXRpb24geWVzL1Bhc3N3b3JkQXV0aGVudGljYXRpb24gbm8vJyAvZXRjL3NzaC9zc2hkX2NvbmZpZwogICAgICBlY2hvICJDaGFsbGVuZ2VSZXNwb25zZUF1dGhlbnRpY2F0aW9uIG5vIiA+PiAvZXRjL3NzaC9zc2hkX2NvbmZpZwogICAgICBlY2hvICJUcnVzdGVkVXNlckNBS2V5cyAvZXRjL3NzaC9jbG91ZGZsYXJlX2NhLnB1YiIgPj4gL2V0Yy9zc2gvc3NoZF9jb25maWcKICAgICAgCiAgICAgIHN5c3RlbWN0bCByZXN0YXJ0IHNzaGQKICAgIGVsc2UKICAgICAgZWNobyAiQ2xvdWRmbGFyZSBDQSBwdWJsaWMga2V5IG5vdCBhdmFpbGFibGUgb3IgaXMgcGxhY2Vob2xkZXIuIFVzaW5nIGRlZmF1bHQgU1NIIGNvbmZpZ3VyYXRpb24uIgogICAgZmkKCiAgIyBDbG9uZSByZXBvc2l0b3J5IGFuZCBzZXR1cCBkb2NrZXIgY29tcG9zZQogIC0gfAogICAgc3VkbyAtdSB2bWFkbWluIGdpdCBjbG9uZSBodHRwczovL2dpdGh1Yi5jb20vY2hhcmxlc3ZlcmRhZC9oZWFydGJlYXQgL2hvbWUvdm1hZG1pbi9oZWFydGJlYXQKICAgIGNkIC9ob21lL3ZtYWRtaW4vaGVhcnRiZWF0L3ZtCiAgICAKICAgICMgU2V0IGVudmlyb25tZW50IHZhcmlhYmxlIGZvciBkb2NrZXItY29tcG9zZQogICAgZWNobyAiS0VZX1ZBVUxUX05BTUU9a3Ytdm0xLXByb2QtOHRzMCIgPiAuZW52CiAgICBjaG93biB2bWFkbWluOnZtYWRtaW4gLmVudgogICAgCiAgICAjIFN0YXJ0IGRvY2tlciBjb21wb3NlIHNlcnZpY2VzCiAgICBzdWRvIC11IHZtYWRtaW4gZG9ja2VyIGNvbXBvc2UgdXAgLWQKCiAgIyBDb25maWd1cmUgVUZXIGZpcmV3YWxsCiAgLSB1ZncgZGVmYXVsdCBkZW55IGluY29taW5nCiAgLSB1ZncgZGVmYXVsdCBhbGxvdyBvdXRnb2luZwogIC0gdWZ3IC0tZm9yY2UgZW5hYmxlCgogICMgQ29uZmlndXJlIHVuYXR0ZW5kZWQgdXBncmFkZXMKICAtIHwKICAgIGNhdCA+IC9ldGMvYXB0L2FwdC5jb25mLmQvNTB1bmF0dGVuZGVkLXVwZ3JhZGVzIDw8ICdFT0wnCiAgICBVbmF0dGVuZGVkLVVwZ3JhZGU6OkFsbG93ZWQtT3JpZ2lucyB7CiAgICAgICAgIiR7ZGlzdHJvX2lkfToke2Rpc3Ryb19jb2RlbmFtZX0iOwogICAgICAgICIke2Rpc3Ryb19pZH06JHtkaXN0cm9fY29kZW5hbWV9LXNlY3VyaXR5IjsKICAgICAgICAiJHtkaXN0cm9faWR9RVNNQXBwczoke2Rpc3Ryb19jb2RlbmFtZX0tYXBwcy1zZWN1cml0eSI7CiAgICAgICAgIiR7ZGlzdHJvX2lkfUVTTToke2Rpc3Ryb19jb2RlbmFtZX0taW5mcmEtc2VjdXJpdHkiOwogICAgfTsKICAgIFVuYXR0ZW5kZWQtVXBncmFkZTo6UGFja2FnZS1CbGFja2xpc3QgewogICAgfTsKICAgIFVuYXR0ZW5kZWQtVXBncmFkZTo6RGV2UmVsZWFzZSAiZmFsc2UiOwogICAgVW5hdHRlbmRlZC1VcGdyYWRlOjpSZW1vdmUtVW51c2VkLURlcGVuZGVuY2llcyAidHJ1ZSI7CiAgICBVbmF0dGVuZGVkLVVwZ3JhZGU6OkF1dG9tYXRpYy1SZWJvb3QgImZhbHNlIjsKICAgIEVPTAogICAgCiAgICBjYXQgPiAvZXRjL2FwdC9hcHQuY29uZi5kLzIwYXV0by11cGdyYWRlcyA8PCAnRU9MJwogICAgQVBUOjpQZXJpb2RpYzo6VXBkYXRlLVBhY2thZ2UtTGlzdHMgIjEiOwogICAgQVBUOjpQZXJpb2RpYzo6VW5hdHRlbmRlZC1VcGdyYWRlICIxIjsKICAgIEVPTAogICAgCiAgICBzeXN0ZW1jdGwgZW5hYmxlIHVuYXR0ZW5kZWQtdXBncmFkZXMKCiAgIyBGaW5hbCBzZXR1cCBtZXNzYWdlCiAgLSBlY2hvICJWTSBwcm92aXNpb25pbmcgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIgPj4gL3Zhci9sb2cvY2xvdWQtaW5pdC1jdXN0b20ubG9nCgp3cml0ZV9maWxlczoKICAtIHBhdGg6IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc2VjcmV0cy1zeW5jLnRpbWVyCiAgICBjb250ZW50OiB8CiAgICAgIFtVbml0XQogICAgICBEZXNjcmlwdGlvbj1TeW5jIHNlY3JldHMgZnJvbSBLZXkgVmF1bHQgZXZlcnkgNSBtaW51dGVzCiAgICAgIFJlcXVpcmVzPXNlY3JldHMtc3luYy5zZXJ2aWNlCgogICAgICBbVGltZXJdCiAgICAgIE9uQ2FsZW5kYXI9KjowLzUKICAgICAgUGVyc2lzdGVudD10cnVlCgogICAgICBbSW5zdGFsbF0KICAgICAgV2FudGVkQnk9dGltZXJzLnRhcmdldAogICAgcGVybWlzc2lvbnM6ICcwNjQ0JwoKICAtIHBhdGg6IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc2VjcmV0cy1zeW5jLnNlcnZpY2UKICAgIGNvbnRlbnQ6IHwKICAgICAgW1VuaXRdCiAgICAgIERlc2NyaXB0aW9uPVN5bmMgc2VjcmV0cyBmcm9tIEtleSBWYXVsdAogICAgICBBZnRlcj1uZXR3b3JrLnRhcmdldAoKICAgICAgW1NlcnZpY2VdCiAgICAgIFR5cGU9b25lc2hvdAogICAgICBVc2VyPXJvb3QKICAgICAgRXhlY1N0YXJ0PS91c3IvbG9jYWwvYmluL3N5bmMtc2VjcmV0cy5zaAoKICAgICAgW0luc3RhbGxdCiAgICAgIFdhbnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0CiAgICBwZXJtaXNzaW9uczogJzA2NDQnCgogIC0gcGF0aDogL3Vzci9sb2NhbC9iaW4vc3luYy1zZWNyZXRzLnNoCiAgICBjb250ZW50OiB8CiAgICAgICMhL2Jpbi9iYXNoCiAgICAgICMgU3luYyBzZWNyZXRzIGZyb20gS2V5IFZhdWx0CiAgICAgIAogICAgICBheiBsb2dpbiAtLWlkZW50aXR5IC0tYWxsb3ctbm8tc3Vic2NyaXB0aW9ucyAyPi9kZXYvbnVsbAogICAgICAKICAgICAgIyBDaGVjayBmb3Igc2VjcmV0IHVwZGF0ZXMKICAgICAgbWtkaXIgLXAgL3NlY3JldHMKICAgICAgCiAgICAgICMgU3luYyB0dW5uZWwgdG9rZW4KICAgICAgTkVXX1RPS0VOPSQoYXoga2V5dmF1bHQgc2VjcmV0IHNob3cgLS12YXVsdC1uYW1lICJrdi12bTEtcHJvZC04dHMwIiAtLW5hbWUgImNsb3VkZmxhcmUtdHVubmVsLXRva2VuIiAtLXF1ZXJ5ICJ2YWx1ZSIgLW8gdHN2IDI+L2Rldi9udWxsIHx8IGVjaG8gIiIpCiAgICAgIGlmIFsgLW4gIiRORVdfVE9LRU4iIF0gJiYgWyAiJE5FV19UT0tFTiIgIT0gIlBMQUNFSE9MREVSX1RVTk5FTF9UT0tFTl9DSEFOR0VfQUZURVJfREVQTE9ZTUVOVCIgXTsgdGhlbgogICAgICAgIGlmIFsgISAtZiAvc2VjcmV0cy9jbG91ZGZsYXJlLXR1bm5lbC10b2tlbiBdIHx8IFsgIiRORVdfVE9LRU4iICE9ICIkKGNhdCAvc2VjcmV0cy9jbG91ZGZsYXJlLXR1bm5lbC10b2tlbikiIF07IHRoZW4KICAgICAgICAgIGVjaG8gIiRORVdfVE9LRU4iID4gL3NlY3JldHMvY2xvdWRmbGFyZS10dW5uZWwtdG9rZW4KICAgICAgICAgIGNobW9kIDQwMCAvc2VjcmV0cy9jbG91ZGZsYXJlLXR1bm5lbC10b2tlbgogICAgICAgICAgY2hvd24gdm1hZG1pbjp2bWFkbWluIC9zZWNyZXRzL2Nsb3VkZmxhcmUtdHVubmVsLXRva2VuCiAgICAgICAgICBlY2hvICIkKGRhdGUpOiBVcGRhdGVkIHR1bm5lbCB0b2tlbiIgPj4gL3Zhci9sb2cvc2VjcmV0cy1zeW5jLmxvZwogICAgICAgIGZpCiAgICAgIGZpCiAgICAgIAogICAgICAjIFN5bmMgQ0EgcHVibGljIGtleQogICAgICBORVdfQ0E9JChheiBrZXl2YXVsdCBzZWNyZXQgc2hvdyAtLXZhdWx0LW5hbWUgImt2LXZtMS1wcm9kLTh0czAiIC0tbmFtZSAiY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5IiAtLXF1ZXJ5ICJ2YWx1ZSIgLW8gdHN2IDI+L2Rldi9udWxsIHx8IGVjaG8gIiIpCiAgICAgIGlmIFsgLW4gIiRORVdfQ0EiIF0gJiYgWyAiJE5FV19DQSIgIT0gIlBMQUNFSE9MREVSX0NBX1BVQkxJQ19LRVlfQ0hBTkdFX0FGVEVSX0RFUExPWU1FTlQiIF07IHRoZW4KICAgICAgICBpZiBbICEgLWYgL3NlY3JldHMvY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5IF0gfHwgWyAiJE5FV19DQSIgIT0gIiQoY2F0IC9zZWNyZXRzL2Nsb3VkZmxhcmUtY2EtcHVibGljLWtleSkiIF07IHRoZW4KICAgICAgICAgIGVjaG8gIiRORVdfQ0EiID4gL3NlY3JldHMvY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5CiAgICAgICAgICBjaG1vZCA0MDAgL3NlY3JldHMvY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5CiAgICAgICAgICBjaG93biB2bWFkbWluOnZtYWRtaW4gL3NlY3JldHMvY2xvdWRmbGFyZS1jYS1wdWJsaWMta2V5CiAgICAgICAgICBlY2hvICIkKGRhdGUpOiBVcGRhdGVkIENBIHB1YmxpYyBrZXkiID4+IC92YXIvbG9nL3NlY3JldHMtc3luYy5sb2cKICAgICAgICAgIAogICAgICAgICAgIyBVcGRhdGUgU1NIIGNvbmZpZ3VyYXRpb24KICAgICAgICAgIGNwIC9zZWNyZXRzL2Nsb3VkZmxhcmUtY2EtcHVibGljLWtleSAvZXRjL3NzaC9jbG91ZGZsYXJlX2NhLnB1YgogICAgICAgICAgY2htb2QgNjQ0IC9ldGMvc3NoL2Nsb3VkZmxhcmVfY2EucHViCiAgICAgICAgICBzeXN0ZW1jdGwgcmVzdGFydCBzc2hkCiAgICAgICAgICBlY2hvICIkKGRhdGUpOiBSZXN0YXJ0ZWQgU1NIIGRhZW1vbiIgPj4gL3Zhci9sb2cvc2VjcmV0cy1zeW5jLmxvZwogICAgICAgIGZpCiAgICAgIGZpCiAgICBwZXJtaXNzaW9uczogJzA3NTUnCgpmaW5hbF9tZXNzYWdlOiAiVk0gc2V0dXAgY29tcGxldGUuIENoZWNrIC92YXIvbG9nL2Nsb3VkLWluaXQtb3V0cHV0LmxvZyBmb3IgZGV0YWlscy4iCg==",
            "dedicated_host_group_id": "",
            "dedicated_host_id": "",
            "disable_password_authentication": true,
            "disk_controller_type": "SCSI",
            "edge_zone": "",
            "encryption_at_host_enabled": false,
            "eviction_policy": "",
            "extensions_time_budget": "PT1H30M",
            "gallery_application": [],
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Compute/virtualMachines/vm1-prod-8ts0",
            "identity": [
              {
                "identity_ids": [
                  "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id-vm1-prod-8ts0"
                ],
                "principal_id": "",
                "tenant_id": "",
                "type": "UserAssigned"
              }
            ],
            "license_type": "",
            "location": "australiaeast",
            "max_bid_price": -1,
            "name": "vm1-prod-8ts0",
            "network_interface_ids": [
              "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkInterfaces/nic-vm1-prod-8ts0"
            ],
            "os_disk": [
              {
                "caching": "ReadWrite",
                "diff_disk_settings": [],
                "disk_encryption_set_id": "",
                "disk_size_gb": 30,
                "name": "vm1-prod-8ts0_OsDisk_1_88f7e8d14a34430bbdac38ea003c9ee7",
                "secure_vm_disk_encryption_set_id": "",
                "security_encryption_type": "",
                "storage_account_type": "Standard_LRS",
                "write_accelerator_enabled": false
              }
            ],
            "os_image_notification": [],
            "patch_assessment_mode": "ImageDefault",
            "patch_mode": "ImageDefault",
            "plan": [],
            "platform_fault_domain": -1,
            "priority": "Regular",
            "private_ip_address": "10.42.1.4",
            "private_ip_addresses": [
              "10.42.1.4"
            ],
            "provision_vm_agent": true,
            "proximity_placement_group_id": "",
            "public_ip_address": "",
            "public_ip_addresses": [],
            "reboot_setting": "",
            "resource_group_name": "rg-vm1-prod-8ts0",
            "secret": [],
            "secure_boot_enabled": false,
            "size": "Standard_B1ms",
            "source_image_id": "",
            "source_image_reference": [
              {
                "offer": "0001-com-ubuntu-server-jammy",
                "publisher": "Canonical",
                "sku": "22_04-lts-gen2",
                "version": "latest"
              }
            ],
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "termination_notification": null,
            "timeouts": null,
            "user_data": "",
            "virtual_machine_id": "2f948c48-2cea-41b1-8961-3df812d60a30",
            "virtual_machine_scale_set_id": "",
            "vm_agent_platform_updates_enabled": false,
            "vtpm_enabled": false,
            "zone": ""
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "admin_password"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "custom_data"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNzAwMDAwMDAwMDAwLCJkZWxldGUiOjI3MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoyNzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_key_vault.vm",
            "azurerm_network_interface.vm",
            "azurerm_resource_group.vm",
            "azurerm_subnet.vm",
            "azurerm_user_assigned_identity.vm",
            "azurerm_virtual_network.vm",
            "data.azurerm_client_config.current",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_managed_disk",
      "name": "vm_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "create_option": "Empty",
            "disk_access_id": "",
            "disk_encryption_set_id": "",
            "disk_iops_read_only": 0,
            "disk_iops_read_write": 500,
            "disk_mbps_read_only": 0,
            "disk_mbps_read_write": 60,
            "disk_size_gb": 32,
            "edge_zone": "",
            "encryption_settings": [],
            "gallery_image_reference_id": "",
            "hyper_v_generation": "",
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Compute/disks/disk-vm1-prod-data-8ts0",
            "image_reference_id": "",
            "location": "australiaeast",
            "logical_sector_size": null,
            "max_shares": 0,
            "name": "disk-vm1-prod-data-8ts0",
            "network_access_policy": null,
            "on_demand_bursting_enabled": false,
            "optimized_frequent_attach_enabled": false,
            "os_type": "",
            "performance_plus_enabled": false,
            "public_network_access_enabled": true,
            "resource_group_name": "rg-vm1-prod-8ts0",
            "secure_vm_disk_encryption_set_id": "",
            "security_type": "",
            "source_resource_id": "",
            "source_uri": "",
            "storage_account_id": "",
            "storage_account_type": "Standard_LRS",
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "tier": "",
            "timeouts": null,
            "trusted_launch_enabled": false,
            "upload_size_bytes": 0,
            "zone": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_interface",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "accelerated_networking_enabled": false,
            "applied_dns_servers": [],
            "auxiliary_mode": "",
            "auxiliary_sku": "",
            "dns_servers": [],
            "edge_zone": "",
            "enable_accelerated_networking": false,
            "enable_ip_forwarding": false,
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkInterfaces/nic-vm1-prod-8ts0",
            "internal_dns_name_label": "",
            "internal_domain_name_suffix": "eatodmhfwteulahbrs1geejkid.px.internal.cloudapp.net",
            "ip_configuration": [
              {
                "gateway_load_balancer_frontend_ip_configuration_id": "",
                "name": "internal",
                "primary": true,
                "private_ip_address": "10.42.1.4",
                "private_ip_address_allocation": "Dynamic",
                "private_ip_address_version": "IPv4",
                "public_ip_address_id": "",
                "subnet_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/virtualNetworks/vnet-vm1-prod/subnets/snet-vm1-prod"
              }
            ],
            "ip_forwarding_enabled": false,
            "location": "australiaeast",
            "mac_address": "",
            "name": "nic-vm1-prod-8ts0",
            "private_ip_address": "10.42.1.4",
            "private_ip_addresses": [
              "10.42.1.4"
            ],
            "resource_group_name": "rg-vm1-prod-8ts0",
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "timeouts": null,
            "virtual_machine_id": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "azurerm_subnet.vm",
            "azurerm_virtual_network.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_interface_security_group_association",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkInterfaces/nic-vm1-prod-8ts0|/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkSecurityGroups/nsg-vm1-prod-8ts0",
            "network_interface_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkInterfaces/nic-vm1-prod-8ts0",
            "network_security_group_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkSecurityGroups/nsg-vm1-prod-8ts0",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_network_interface.vm",
            "azurerm_network_security_group.vm",
            "azurerm_resource_group.vm",
            "azurerm_subnet.vm",
            "azurerm_virtual_network.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_security_group",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/networkSecurityGroups/nsg-vm1-prod-8ts0",
            "location": "australiaeast",
            "name": "nsg-vm1-prod-8ts0",
            "resource_group_name": "rg-vm1-prod-8ts0",
            "security_rule": [
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "443",
                "destination_port_ranges": [],
                "direction": "Outbound",
                "name": "AllowHTTPSOutbound",
                "priority": 1000,
                "protocol": "Tcp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "53",
                "destination_port_ranges": [],
                "direction": "Outbound",
                "name": "AllowDNSOutbound",
                "priority": 1010,
                "protocol": "Udp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "80",
                "destination_port_ranges": [],
                "direction": "Outbound",
                "name": "AllowHTTPOutbound",
                "priority": 1020,
                "protocol": "Tcp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Deny",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "*",
                "destination_port_ranges": [],
                "direction": "Inbound",
                "name": "DenyAllInbound",
                "priority": 4000,
                "protocol": "*",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Deny",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "*",
                "destination_port_ranges": [],
                "direction": "Outbound",
                "name": "DenyAllOutbound",
                "priority": 4000,
                "protocol": "*",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              }
            ],
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0",
            "location": "australiaeast",
            "managed_by": "",
            "name": "rg-vm1-prod-8ts0",
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address_prefixes": [
              "10.42.1.0/24"
            ],
            "default_outbound_access_enabled": true,
            "delegation": [],
            "enforce_private_link_endpoint_network_policies": false,
            "enforce_private_link_service_network_policies": false,
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/virtualNetworks/vnet-vm1-prod/subnets/snet-vm1-prod",
            "name": "snet-vm1-prod",
            "private_endpoint_network_policies": "Enabled",
            "private_endpoint_network_policies_enabled": true,
            "private_link_service_network_policies_enabled": true,
            "resource_group_name": "rg-vm1-prod-8ts0",
            "service_endpoint_policy_ids": null,
            "service_endpoints": null,
            "timeouts": null,
            "virtual_network_name": "vnet-vm1-prod"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "azurerm_virtual_network.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_user_assigned_identity",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "client_id": "c0df73ad-3b9e-4ae1-b59a-520411e6560c",
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id-vm1-prod-8ts0",
            "location": "australiaeast",
            "name": "id-vm1-prod-8ts0",
            "principal_id": "2cbf3979-e92a-4765-9aaa-737e02707b76",
            "resource_group_name": "rg-vm1-prod-8ts0",
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "tenant_id": "42ff806a-1ba2-48f1-a4af-eadec06d2486",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_machine_data_disk_attachment",
      "name": "vm_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "caching": "ReadWrite",
            "create_option": "Attach",
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Compute/virtualMachines/vm1-prod-8ts0/dataDisks/disk-vm1-prod-data-8ts0",
            "lun": 0,
            "managed_disk_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Compute/disks/disk-vm1-prod-data-8ts0",
            "timeouts": null,
            "virtual_machine_id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Compute/virtualMachines/vm1-prod-8ts0",
            "write_accelerator_enabled": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_key_vault.vm",
            "azurerm_linux_virtual_machine.vm",
            "azurerm_managed_disk.vm_data",
            "azurerm_network_interface.vm",
            "azurerm_resource_group.vm",
            "azurerm_subnet.vm",
            "azurerm_user_assigned_identity.vm",
            "azurerm_virtual_network.vm",
            "data.azurerm_client_config.current",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network",
      "name": "vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address_space": [
              "10.42.0.0/16"
            ],
            "bgp_community": "",
            "ddos_protection_plan": [],
            "dns_servers": [],
            "edge_zone": "",
            "encryption": [],
            "flow_timeout_in_minutes": 0,
            "guid": "b0e12620-b4e5-45c9-80e1-8cb662112a43",
            "id": "/subscriptions/356b0996-276c-4104-b906-efa2014f9d64/resourceGroups/rg-vm1-prod-8ts0/providers/Microsoft.Network/virtualNetworks/vnet-vm1-prod",
            "location": "australiaeast",
            "name": "vnet-vm1-prod",
            "resource_group_name": "rg-vm1-prod-8ts0",
            "subnet": [],
            "tags": {
              "Environment": "prod",
              "ManagedBy": "terraform",
              "Project": "vm1-prod",
              "Purpose": "docker-compose-workloads"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.vm",
            "random_string.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "cloudflare_record",
      "name": "vm_ssh",
      "provider": "provider[\"registry.terraform.io/cloudflare/cloudflare\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "allow_overwrite": false,
            "comment": "Managed by Terraform - SSH tunnel for vm1-prod",
            "content": null,
            "created_on": "2025-08-25T07:03:45.921511Z",
            "data": [],
            "hostname": "vm1.heartbeatchurch.com.au",
            "id": "cc25ff00fab8ae86681b52a3a3fc2f5a",
            "metadata": {},
            "modified_on": "2025-08-25T07:03:45.921511Z",
            "name": "vm1",
            "priority": null,
            "proxiable": true,
            "proxied": true,
            "tags": null,
            "timeouts": null,
            "ttl": 1,
            "type": "CNAME",
            "value": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f.cfargotunnel.com",
            "zone_id": "80440a32523d928c9d7e015168a67758"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMyJ9",
          "dependencies": [
            "cloudflare_zero_trust_tunnel_cloudflared.vm_ssh",
            "random_string.tunnel_secret"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "cloudflare_zero_trust_tunnel_cloudflared",
      "name": "vm_ssh",
      "provider": "provider[\"registry.terraform.io/cloudflare/cloudflare\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "d26a8771162442a563371ea8097acc89",
            "cname": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f.cfargotunnel.com",
            "config_src": null,
            "id": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f",
            "name": "vm1-prod-ssh-tunnel",
            "secret": "a2tZMERnaVJESWNPb0swMTE1aXZMdlVBNGdnemxISWZsbENpbXMwZ1ZkT2VWOENNTUI1TnJVU1BHaXBVNUo4Zg==",
            "tunnel_token": "eyJhIjoiZDI2YTg3NzExNjI0NDJhNTYzMzcxZWE4MDk3YWNjODkiLCJ0IjoiMjM5MGIzYzMtYjkzZi00ZjNmLTliZDEtZWRlNDMzMmE5YzlmIiwicyI6ImEydFpNRVJuYVZKRVNXTlBiMHN3TVRFMWFYWk1kbFZCTkdkbmVteElTV1pzYkVOcGJYTXdaMVprVDJWV09FTk5UVUkxVG5KVlUxQkhhWEJWTlVvNFpnPT0ifQ=="
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "tunnel_token"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "random_string.tunnel_secret"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "cloudflare_zero_trust_tunnel_cloudflared_config",
      "name": "vm_ssh",
      "provider": "provider[\"registry.terraform.io/cloudflare/cloudflare\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "d26a8771162442a563371ea8097acc89",
            "config": [
              {
                "ingress_rule": [
                  {
                    "hostname": "vm1.heartbeatchurch.com.au",
                    "origin_request": [],
                    "path": "",
                    "service": "ssh://localhost:22"
                  },
                  {
                    "hostname": "",
                    "origin_request": [],
                    "path": "",
                    "service": "http_status:404"
                  }
                ],
                "origin_request": [],
                "warp_routing": []
              }
            ],
            "id": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f",
            "tunnel_id": "2390b3c3-b93f-4f3f-9bd1-ede4332a9c9f"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "cloudflare_zero_trust_tunnel_cloudflared.vm_ssh",
            "random_string.tunnel_secret"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_string",
      "name": "suffix",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "id": "8ts0",
            "keepers": null,
            "length": 4,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "8ts0",
            "special": false,
            "upper": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_string",
      "name": "tunnel_secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "id": "kkY0DgiRDIcOoK0115ivLvUA4ggzlHIfllCims0gVdOeV8CMMB5NrUSPGipU5J8f",
            "keepers": null,
            "length": 64,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "kkY0DgiRDIcOoK0115ivLvUA4ggzlHIfllCims0gVdOeV8CMMB5NrUSPGipU5J8f",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    }
  ],
  "check_results": null
}
